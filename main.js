(()=>{"use strict";const t=function(){let t=[];t=JSON.parse(localStorage.getItem("myProjects"));const e=function(e,o){const i=document.getElementById(o),d=document.createElement("div"),a=document.createElement("h6"),l=document.createElement("div"),c=document.createElement("img"),s=document.createElement("img"),u=document.createElement("img");d.setAttribute("id","cardToDoList"),a.setAttribute("id","toDoItem"),a.innerHTML=`${e.title}: ${e.description}<br />\n    Goal Completion: ${e.date}`,c.setAttribute("id","completedToDo"),c.setAttribute("src","./images/check-bold.png"),c.setAttribute("alt","mark as completed icon"),c.setAttribute("title","mark completed");let p=`${t[o].toDoArray.indexOf(e)}`;c.setAttribute("data-position",`${o}`),c.setAttribute("data-todo",`${p}`),s.setAttribute("id","editToDo"),s.setAttribute("src","./images/pencil.png"),s.setAttribute("alt","edit project icon"),s.setAttribute("title","edit todo item"),s.setAttribute("data-position",`${o}`),s.setAttribute("data-todo",`${p}`),u.setAttribute("id","deleteToDo"),u.setAttribute("src","./images/delete-alert.png"),u.setAttribute("alt","delete project icon"),u.setAttribute("title","delete todo item"),u.setAttribute("data-position",`${o}`),u.setAttribute("data-todo",`${p}`),i.appendChild(d),d.append(a),a.append(l),l.append(c),l.append(s),l.append(u),"urgent"===e.priority?a.style.backgroundColor="var(--urgent)":"soon"===e.priority?a.style.backgroundColor="var(--soon)":"later"===e.priority?a.style.backgroundColor="var(--later)":(a.style.backgroundColor="var(--project-light)",a.style.setProperty("text-decoration","line-through"),c.remove()),c.addEventListener("dblclick",r.toDoCompleted),s.addEventListener("dblclick",r.editToDo),u.addEventListener("dblclick",n.deleteToDo)};return{addAllProjects:function(){const o=document.getElementById("projects"),r=document.getElementById("projectList");o.innerHTML="",r.innerHTML="",t.forEach((o=>function(o){const r=document.getElementById("projectList"),d=document.getElementById("projects"),a=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h2"),s=document.createElement("img"),u=document.createElement("h6"),p=document.createElement("h4"),m=document.createElement("button");a.setAttribute("class","card"),a.setAttribute("id",`${t.indexOf(o)}`),l.setAttribute("id","titleDiv"),c.setAttribute("id","projectTitle"),c.textContent=`Project: ${o.project}`,s.setAttribute("id","deletePrj"),s.setAttribute("src","./images/delete-alert.png"),s.setAttribute("alt","delete project icon"),s.setAttribute("title","delete project"),s.setAttribute("data-position",`${t.indexOf(o)}`),p.setAttribute("id","toDoListHeader"),p.textContent=`${o.project} To Do List:`,m.setAttribute("id","addToDoBtn"),m.setAttribute("type","submit"),m.setAttribute("data-position",`${t.indexOf(o)}`),m.textContent="+add todo item",u.textContent=`${o.project}`,u.setAttribute("id","projectTitleSidebar"),d.append(a),a.append(l),l.append(c),l.append(s),a.append(p);let b=`${t.indexOf(o)}`;t[`${t.indexOf(o)}`].toDoArray.forEach((t=>e(t,b))),a.append(m),s.addEventListener("dblclick",n.deleteProject),m.addEventListener("click",i.addToDoForm),r.append(u)}(o)))}}}(),e=t,o=function(){function t(t){this.project=t,this.toDoArray=[]}class e{constructor(t="unknown",e="unknown",o=0,n=0){this.title=t,this.description=e,this.date=o,this.priority=n}}return{addProject:function(e){let o=[];o=JSON.parse(localStorage.getItem("myProjects")),e.preventDefault();const n=document.getElementById("project").value;if(!n)return alert("Please enter a project name in the input."),!1;{let e=new t(n);o.push(e),localStorage.setItem("myProjects",JSON.stringify(o)),location.reload()}},addToDo:function(t){let o=[];o=JSON.parse(localStorage.getItem("myProjects")),t.preventDefault();const n=document.getElementById("title").value,r=document.getElementById("description").value,i=document.getElementById("due-date").value,d=document.getElementById("priority").value;if(!(n&&r&&i))return alert("All fields are required to add todo item."),!1;{let a=new e(n,r,i,d);o[`${t.target.getAttribute("data-position")}`].toDoArray.push(a),localStorage.setItem("myProjects",JSON.stringify(o)),location.reload()}}}}(),n={deleteProject:function(t){let e=[];e=JSON.parse(localStorage.getItem("myProjects")),e.splice(t.target.getAttribute("data-position"),1),localStorage.setItem("myProjects",JSON.stringify(e)),location.reload()},deleteToDo:function(t){let e=[];e=JSON.parse(localStorage.getItem("myProjects")),e[t.target.getAttribute("data-position")].toDoArray.splice(t.target.getAttribute("data-todo"),1),localStorage.setItem("myProjects",JSON.stringify(e)),location.reload()}},r={editToDo:function(t){console.log("working")},toDoCompleted:function(t){let e=[];e=JSON.parse(localStorage.getItem("myProjects")),e[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].priority="completed",localStorage.setItem("myProjects",JSON.stringify(e)),location.reload()}},i={addProjectForm:function(t){const n=document.getElementById("projects"),r=document.createElement("form"),i=document.createElement("div"),d=document.createElement("label"),a=document.createElement("input"),l=document.createElement("button"),c=document.createElement("button");r.setAttribute("id","projectForm"),i.setAttribute("id","projectFormDiv"),d.setAttribute("for","project"),d.textContent="Project Name",a.setAttribute("type","text"),a.setAttribute("id","project"),a.setAttribute("placeholder","project name"),l.setAttribute("id","projectFormSaveBtn"),l.setAttribute("type","submit"),l.textContent="save",l.style.backgroundColor="var(--later)",c.setAttribute("id","projectCancelBtn"),c.setAttribute("type","button"),c.textContent="cancel",c.style.backgroundColor="var(--urgent)",n.innerHTML="",n.appendChild(r),r.appendChild(i),i.appendChild(d),i.appendChild(a),r.appendChild(l),r.appendChild(c),l.addEventListener("click",o.addProject),c.addEventListener("click",e.addAllProjects)},addToDoForm:function(t){const n=document.getElementById("projects"),r=document.createElement("form"),i=document.createElement("div");r.setAttribute("id","toDoForm");const d=document.createElement("div"),a=document.createElement("label"),l=document.createElement("input");a.setAttribute("for","title"),a.textContent="To Do Item Title",l.setAttribute("type","text"),l.setAttribute("id","title"),l.setAttribute("placeholder","title");const c=document.createElement("div"),s=document.createElement("label"),u=document.createElement("input");s.setAttribute("for","descripton"),s.textContent="To Do Item Description",u.setAttribute("type","text"),u.setAttribute("id","description"),u.setAttribute("placeholder","description");const p=document.createElement("div"),m=document.createElement("label"),b=document.createElement("input");m.setAttribute("for","due-date"),m.textContent="To Do Item Due Date",b.setAttribute("type","date"),b.setAttribute("id","due-date");const A=document.createElement("div"),g=document.createElement("label"),y=document.createElement("select"),E=document.createElement("option"),C=document.createElement("option"),j=document.createElement("option");g.setAttribute("for","priority"),g.textContent="To Do Item Priority",y.setAttribute("id","priority"),E.setAttribute("value","urgent"),E.setAttribute("id","priorityNow"),E.textContent="Urgent",E.style.backgroundColor="var(--urgent)",C.setAttribute("value","soon"),C.setAttribute("id","prioritySoon"),C.textContent="Soon",C.style.backgroundColor="var(--soon)",j.setAttribute("value","later"),j.setAttribute("id","priorityLater"),j.textContent="Later",j.style.backgroundColor="var(--later)";const h=document.createElement("button");h.setAttribute("id","toDoFormSaveBtn"),h.setAttribute("type","submit"),h.textContent="save",h.style.backgroundColor="var(--later)";let v=t.target.getAttribute("data-position");h.setAttribute("data-position",`${v}`);const f=document.createElement("button");f.setAttribute("id","toDoCancelBtn"),f.setAttribute("type","button"),f.textContent="cancel",f.style.backgroundColor="var(--urgent)",n.innerHTML="",n.appendChild(r),r.appendChild(i),i.appendChild(d),d.appendChild(a),d.appendChild(l),i.appendChild(c),c.appendChild(s),c.appendChild(u),i.appendChild(p),p.appendChild(m),p.appendChild(b),i.appendChild(A),A.appendChild(g),A.appendChild(y),y.appendChild(E),y.appendChild(C),y.appendChild(j),i.appendChild(h),i.appendChild(f),h.addEventListener("click",o.addToDo),f.addEventListener("click",e.addAllProjects)}};let d=[];window.onload=function(){d=JSON.parse(localStorage.getItem("myProjects")),null===d&&(d=[],console.log("reloaded")),e.addAllProjects()},document.getElementById("addProjectBtn").addEventListener("click",i.addProjectForm)})();