(()=>{"use strict";const t=function(){let t=[];t=JSON.parse(localStorage.getItem("myProjects"));const e=function(e){document.getElementById("projects").innerHTML="",projectList.innerHTML="",t.forEach((t=>o(t)))},o=function(t){const e=document.getElementById("projectList"),o=document.createElement("h6");o.textContent=`${t.project}`,o.setAttribute("id","projectTitleSidebar"),e.append(o)};return{addAllProjects:function(){const o=document.getElementById("projects"),i=document.getElementById("projectList");o.innerHTML="",i.innerHTML="",e(),t.forEach((e=>function(e){const o=document.getElementById("projects"),i=document.createElement("div"),a=document.createElement("div"),c=document.createElement("h2"),l=document.createElement("div"),s=document.createElement("img"),u=document.createElement("img"),p=document.createElement("h4"),m=document.createElement("button");i.setAttribute("class","card"),i.setAttribute("id",`${t.indexOf(e)}`),a.setAttribute("id","titleDiv"),c.setAttribute("id","projectTitle"),c.textContent=`Project: ${e.project}`,l.setAttribute("id","projectTitleIcons"),s.setAttribute("id","expand"),s.setAttribute("src","./images/format-list-bulleted-square.png"),s.setAttribute("alt","expand project"),s.setAttribute("title","expand to see todo list"),s.setAttribute("data-position",`${t.indexOf(e)}`),u.setAttribute("id","deletePrj"),u.setAttribute("src","./images/delete-alert.png"),u.setAttribute("alt","delete project icon"),u.setAttribute("title","delete project"),u.setAttribute("data-position",`${t.indexOf(e)}`),p.setAttribute("id","toDoListHeader"),p.textContent=`${e.project} To Do List:`,m.setAttribute("id","addToDoBtn"),m.setAttribute("type","submit"),m.setAttribute("data-position",`${t.indexOf(e)}`),m.textContent="+add todo item",o.append(i),i.append(a),a.append(c),a.append(l),l.append(s),l.append(u),u.addEventListener("dblclick",r.deleteProject),m.addEventListener("click",d.addToDoForm),s.addEventListener("click",n.expand)}(e)))},projectsSidebar:e}}(),e=t,o=function(){function t(t){this.project=t,this.toDoArray=[]}class e{constructor(t="unknown",e="unknown",o=0,r=0){this.title=t,this.description=e,this.date=o,this.priority=r}}return{addProject:function(e){let o=[];o=JSON.parse(localStorage.getItem("myProjects")),e.preventDefault();const r=document.getElementById("project").value;if(!r)return alert("Please enter a project name in the input."),!1;{let e=new t(r);o.push(e),localStorage.setItem("myProjects",JSON.stringify(o)),location.reload()}},addToDo:function(t){let o=[];o=JSON.parse(localStorage.getItem("myProjects")),t.preventDefault();const r=document.getElementById("title").value,n=document.getElementById("description").value,i=document.getElementById("due-date").value,d=document.getElementById("priority").value;if(!(r&&n&&i))return alert("All fields are required to add todo item."),!1;{let a=new e(r,n,i,d);console.log(t.target.getAttribute("data-todo")),null===t.target.getAttribute("data-todo")?o[`${t.target.getAttribute("data-position")}`].toDoArray.push(a):o[t.target.getAttribute("data-position")].toDoArray.splice(t.target.getAttribute("data-todo"),1,a),localStorage.setItem("myProjects",JSON.stringify(o)),location.reload()}}}}(),r={deleteProject:function(t){let e=[];e=JSON.parse(localStorage.getItem("myProjects")),e.splice(t.target.getAttribute("data-position"),1),localStorage.setItem("myProjects",JSON.stringify(e)),location.reload()},deleteToDo:function(t){let e=[];e=JSON.parse(localStorage.getItem("myProjects")),e[t.target.getAttribute("data-position")].toDoArray.splice(t.target.getAttribute("data-todo"),1),localStorage.setItem("myProjects",JSON.stringify(e)),location.reload()}},n={expand:function(){console.log("working")}},i={addProjectForm:function(t){const r=document.getElementById("projects"),n=document.createElement("form"),i=document.createElement("div"),d=document.createElement("label"),a=document.createElement("input"),c=document.createElement("button"),l=document.createElement("button");n.setAttribute("id","projectForm"),i.setAttribute("id","projectFormDiv"),d.setAttribute("for","project"),d.textContent="Project Name",a.setAttribute("type","text"),a.setAttribute("id","project"),a.setAttribute("placeholder","project name"),c.setAttribute("id","projectFormSaveBtn"),c.setAttribute("type","submit"),c.textContent="save",c.style.backgroundColor="var(--later)",l.setAttribute("id","projectCancelBtn"),l.setAttribute("type","button"),l.textContent="cancel",l.style.backgroundColor="var(--urgent)",r.innerHTML="",r.appendChild(n),n.appendChild(i),i.appendChild(d),i.appendChild(a),n.appendChild(c),n.appendChild(l),c.addEventListener("click",o.addProject),l.addEventListener("click",e.addAllProjects)},addToDoForm:function(t){let r=[];r=JSON.parse(localStorage.getItem("myProjects"));const n=document.getElementById("projects"),i=document.createElement("form"),d=document.createElement("div");i.setAttribute("id","toDoForm");const a=document.createElement("div"),c=document.createElement("label"),l=document.createElement("input");c.setAttribute("for","title"),c.textContent="To Do Item Title",l.setAttribute("type","text"),l.setAttribute("id","title"),"editToDo"===t.target.id?l.setAttribute("value",`${r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].title}`):l.setAttribute("placeholder","title");const s=document.createElement("div"),u=document.createElement("label"),p=document.createElement("input");u.setAttribute("for","descripton"),u.textContent="To Do Item Description",p.setAttribute("type","text"),p.setAttribute("id","description"),"editToDo"===t.target.id?p.setAttribute("value",`${r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].description}`):p.setAttribute("placeholder","description");const m=document.createElement("div"),b=document.createElement("label"),g=document.createElement("input");b.setAttribute("for","due-date"),b.textContent="To Do Item Due Date",g.setAttribute("type","date"),g.setAttribute("id","due-date"),"editToDo"===t.target.id&&g.setAttribute("value",`${r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].date}`);const A=document.createElement("div"),y=document.createElement("label"),E=document.createElement("select"),j=document.createElement("option"),C=document.createElement("option"),v=document.createElement("option"),h=document.createElement("option");y.setAttribute("for","priority"),y.textContent="To Do Item Priority",E.setAttribute("id","priority"),j.setAttribute("value","urgent"),j.setAttribute("id","priorityNow"),j.textContent="Urgent",j.style.backgroundColor="var(--urgent)",C.setAttribute("value","soon"),C.setAttribute("id","prioritySoon"),C.textContent="Soon",C.style.backgroundColor="var(--soon)",v.setAttribute("value","later"),v.setAttribute("id","priorityLater"),v.textContent="Later",v.style.backgroundColor="var(--later)",h.setAttribute("value","completed"),h.setAttribute("id","priorityCompleted"),h.textContent="Completed",h.style.backgroundColor="var(--project-light)","editToDo"===t.target.id&&"urgent"===r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].priority?j.setAttribute("selected","selected"):"editToDo"===t.target.id&&"soon"===r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].priority?C.setAttribute("selected","selected"):"editToDo"===t.target.id&&"later"===r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].priority?v.setAttribute("selected","selected"):"editToDo"===t.target.id&&"completed"===r[t.target.getAttribute("data-position")].toDoArray[t.target.getAttribute("data-todo")].priority?h.setAttribute("selected","selected"):j.setAttribute("selected","selected");const D=document.createElement("button");D.setAttribute("id","toDoFormSaveBtn"),D.setAttribute("type","submit"),D.textContent="save",D.style.backgroundColor="var(--later)";let f=t.target.getAttribute("data-position");D.setAttribute("data-position",`${f}`),"editToDo"===t.target.id&&D.setAttribute("data-todo",`${t.target.getAttribute("data-todo")}`);const I=document.createElement("button");I.setAttribute("id","toDoCancelBtn"),I.setAttribute("type","button"),I.textContent="cancel",I.style.backgroundColor="var(--urgent)",n.innerHTML="",n.appendChild(i),i.appendChild(d),d.appendChild(a),a.appendChild(c),a.appendChild(l),d.appendChild(s),s.appendChild(u),s.appendChild(p),d.appendChild(m),m.appendChild(b),m.appendChild(g),d.appendChild(A),A.appendChild(y),A.appendChild(E),E.appendChild(j),E.appendChild(C),E.appendChild(v),E.appendChild(h),d.appendChild(D),d.appendChild(I),I.addEventListener("click",e.addAllProjects),D.addEventListener("click",o.addToDo)}},d=i;let a=[];window.onload=function(){a=JSON.parse(localStorage.getItem("myProjects")),null===a&&(a=[]),e.projectsSidebar()};const c=document.getElementById("addProjectBtn"),l=document.getElementById("showAllProjectsBtn");c.addEventListener("click",d.addProjectForm),l.addEventListener("dblclick",e.addAllProjects)})();